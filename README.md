# 录音转写工具

一个基于Python的Windows桌面录音转写软件，能够录制音频并将其转换为文字。

## 功能特性

- 🎤 **实时录音**: 支持高质量音频录制
- 📝 **语音转文字**: 自动将音频转换为文本
- 💾 **文件支持**: 支持多种音频格式（WAV, MP3, FLAC, M4A）
- 🌐 **多引擎识别**: 支持在线和离线语音识别
- 💻 **友好界面**: 简洁直观的图形用户界面
- ⏱️ **实时计时**: 录音过程中显示实时时长
- 📄 **文本保存**: 支持将转写结果保存为文本文件

## 系统要求

- Windows 10/11
- Python 3.7+
- 麦克风设备
- 网络连接（用于在线语音识别，可选）

## 快速开始

### 1. 安装依赖
```bash
# 安装Python依赖
pip install -r requirements.txt

# 如果pip安装PyAudio失败，可以使用：
pip install pipwin
pipwin install pyaudio
```

### 2. 启动程序
```bash
python audio_transcriber.py
```

## 使用指南

### 📹 录音功能
1. 点击"开始录音"按钮
2. 对着麦克风清晰说话
3. 观察实时时长显示
4. 点击"停止录音"结束录制
5. 录音文件自动保存为 `recording_YYYYMMDD_HHMMSS.wav`

### 🎵 文件转写
1. 点击"打开音频文件"选择已有音频
2. 支持格式：WAV, MP3, FLAC, M4A
3. 点击"开始转写"进行语音识别
4. 等待转写完成

### 💾 结果保存
1. 转写完成后，文本显示在下方区域
2. 点击"保存文本"将结果保存为TXT文件
3. 可以手动编辑转写结果
4. 点击"清空文本"清除当前内容

## 使用技巧

### 🎤 录音质量优化
- **环境选择**：选择安静的环境录音
- **麦克风距离**：保持15-30cm的适当距离
- **说话方式**：语速适中，发音清晰
- **音量控制**：避免过大或过小的音量

### 🔊 转写准确率提升
- **音频质量**：使用高质量的音频文件
- **语言设置**：程序默认使用中文识别
- **网络连接**：在线识别需要稳定的网络
- **音频长度**：建议单次录音不超过5分钟

### 📁 文件格式支持
- **完全支持**：WAV, FLAC（无需额外软件）
- **需要ffmpeg**：MP3, M4A, AAC等
- **推荐格式**：WAV（最佳兼容性）

## 技术架构

- **GUI框架**: Tkinter
- **音频录制**: PyAudio
- **语音识别**: SpeechRecognition
- **音频处理**: Wave, PyDub
- **多线程**: Threading

## 语音识别引擎

1. **Google Speech Recognition** (在线)
   - 高准确率
   - 需要网络连接
   - 支持中文识别

2. **CMU Sphinx** (离线)
   - 无需网络
   - 备用选项
   - 准确率相对较低

## 故障排除

### 音频格式转换失败
如果遇到"音频格式转换失败: [WinError 2] 系统找不到指定的文件"错误：

**原因**: 系统缺少ffmpeg，无法处理MP3、M4A等格式的音频文件。

**解决方案**:
1. 安装imageio-ffmpeg（推荐）：
   ```bash
   py -m pip install imageio-ffmpeg
   ```

2. 手动安装ffmpeg:
   - 下载: https://ffmpeg.org/download.html
   - 选择Windows版本，解压到 `C:\ffmpeg`
   - 将 `C:\ffmpeg\bin` 添加到系统PATH环境变量
   - 重启命令行和程序

**验证安装**:
```bash
ffmpeg -version
```

### 其他常见问题

**录音设备问题**:
- 检查麦克风权限设置
- 确保音频设备正常工作
- 尝试不同的音频设备

**语音识别失败**:
- 确保录音环境安静
- 说话清晰，语速适中
- 检查网络连接（Google识别需要网络）

**程序启动失败**:
- 确保Python版本3.7+
- 重新安装依赖：`pip install -r requirements.txt`
- 检查是否有杀毒软件阻止

**转写结果为空**:
- 检查音频是否包含清晰的语音内容
- 检查网络连接（在线识别）
- 尝试在更安静的环境重新录制

## 性能优化

### 💡 提升速度
- 使用较短的音频片段
- 确保稳定的网络连接
- 关闭不必要的后台程序

### 🎯 提升准确率
- 使用高质量麦克风
- 在安静环境中录音
- 说话清晰，语速适中
- 避免方言和口音过重

## 高级设置

### 🎛️ 录音参数调整
在 `audio_transcriber.py` 中可以调整：
- `self.rate = 16000`：采样率（推荐16kHz）
- `self.channels = 1`：声道数（单声道）
- `self.chunk = 1024`：缓冲区大小

## 注意事项

- 确保麦克风权限已开启
- 录音环境尽量安静
- 说话清晰，语速适中
- 首次使用建议测试麦克风
- 长时间录音可能占用较多磁盘空间

## 开发计划

- [ ] 支持更多音频格式
- [ ] 添加实时转写功能
- [ ] 支持多语言识别
- [ ] 优化识别准确率
- [ ] 添加音频编辑功能
- [ ] 支持批量文件处理

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

---

**注意**: 本软件仅供学习和个人使用，请遵守相关法律法规。